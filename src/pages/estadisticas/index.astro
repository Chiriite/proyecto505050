---
import Layout from '../../layouts/Layout.astro';
import GradientBackground from '../../components/GradientBackground.astro';
import SimplifiedStatsCharts from '../../components/SimplifiedStatsCharts';
import RecordsGrid from '../../components/RecordsGrid';
---

<Layout title="Estadísticas - Proyecto 50/50/50">
  <GradientBackground>
    <div class="container mx-auto px-3 md:px-4 py-6 md:py-12">
      <!-- Mobile-First Header -->
      <div class="text-center mb-8 md:mb-16">
        <h1 class="text-3xl md:text-5xl font-bold text-white mb-4 md:mb-6 tracking-tight">
          Estadísticas del Proyecto
        </h1>
        <div class="w-16 md:w-20 h-1 bg-gradient-to-r from-orange-500 to-orange-400 mx-auto mb-4 md:mb-6 rounded-full"></div>
        <p class="text-lg md:text-xl text-gray-300 max-w-2xl mx-auto leading-relaxed px-2 md:px-0">
          Análisis detallado del rendimiento a través de las 50 provincias de España
        </p>
      </div>

      <!-- Mobile-Optimized Charts -->
      <SimplifiedStatsCharts client:load />
      
      <!-- Widget and Records Grid: 3 columns x 2 rows -->
      <div class="grid grid-cols-1 lg:grid-cols-3 grid-rows-1 lg:grid-rows-2 gap-4 md:gap-6 mt-8">
        <!-- Mayor Elevación - Top left (spans 2 columns) -->
        <div class="lg:col-span-2 bg-gradient-to-br from-purple-950/70 to-black/50 rounded-xl border border-purple-900/30 p-4 md:p-6 backdrop-blur-sm shadow-xl shadow-black/60">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <svg class="w-6 h-6 text-purple-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3l14 9-14 9V3z"></path>
              </svg>
              <h4 class="text-xl font-bold text-white">Mayor Elevación</h4>
            </div>
            <div class="text-right">
              <div class="text-3xl font-bold text-purple-300 mb-1" id="max-elevation-city">
                <!-- Data will be populated by RecordsGrid -->
              </div>
              <div class="text-purple-200 text-sm" id="max-elevation-value">
                <!-- Data will be populated by RecordsGrid -->
              </div>
            </div>
          </div>
        </div>

        <div class="lg:row-span-2 bg-black/60 rounded-xl border border-gray-800/40 p-4 backdrop-blur-sm shadow-xl shadow-black/60">
          <div class="flex justify-center">
            <iframe 
              allowtransparency="true" 
              frameborder="0" 
              width="280" 
              height="450" 
              scrolling="no" 
              src="https://www.migranodearena.org/widget/proyecto-50-50-50-50-d-as-50-kil-metros-50-provincias-espa-olas"
              class="rounded-lg"
            ></iframe>
          </div>
        </div>

        <!-- Mejor Ritmo - Bottom left (spans 2 columns) -->
        <div class="lg:col-span-2 bg-gradient-to-br from-green-950/70 to-black/50 rounded-xl border border-green-900/30 p-4 md:p-6 backdrop-blur-sm shadow-xl shadow-black/60">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <svg class="w-6 h-6 text-green-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
              </svg>
              <h4 class="text-xl font-bold text-white">Mejor Ritmo</h4>
            </div>
            <div class="text-right">
              <div class="text-3xl font-bold text-green-300 mb-1" id="best-pace-city">
                <!-- Data will be populated by RecordsGrid -->
              </div>
              <div class="text-green-200 text-sm" id="best-pace-value">
                <!-- Data will be populated by RecordsGrid -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <div style="display: none;">
        <RecordsGrid client:load />
      </div>
    </div>
  </GradientBackground>
</Layout>
